(function(t){function e(e){for(var n,s,i=e[0],c=e[1],u=e[2],d=0,p=[];d<i.length;d++)s=i[d],Object.prototype.hasOwnProperty.call(o,s)&&o[s]&&p.push(o[s][0]),o[s]=0;for(n in c)Object.prototype.hasOwnProperty.call(c,n)&&(t[n]=c[n]);l&&l(e);while(p.length)p.shift()();return r.push.apply(r,u||[]),a()}function a(){for(var t,e=0;e<r.length;e++){for(var a=r[e],n=!0,i=1;i<a.length;i++){var c=a[i];0!==o[c]&&(n=!1)}n&&(r.splice(e--,1),t=s(s.s=a[0]))}return t}var n={},o={app:0},r=[];function s(e){if(n[e])return n[e].exports;var a=n[e]={i:e,l:!1,exports:{}};return t[e].call(a.exports,a,a.exports,s),a.l=!0,a.exports}s.m=t,s.c=n,s.d=function(t,e,a){s.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:a})},s.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},s.t=function(t,e){if(1&e&&(t=s(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var a=Object.create(null);if(s.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)s.d(a,n,function(e){return t[e]}.bind(null,n));return a},s.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return s.d(e,"a",e),e},s.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},s.p="/";var i=window["webpackJsonp"]=window["webpackJsonp"]||[],c=i.push.bind(i);i.push=e,i=i.slice();for(var u=0;u<i.length;u++)e(i[u]);var l=c;r.push([0,"chunk-vendors"]),a()})({0:function(t,e,a){t.exports=a("56d7")},"06b3":function(t,e,a){},"11a6":function(t,e,a){},"19b4":function(t,e,a){},"1a54":function(t,e,a){"use strict";a("ad95")},2312:function(t,e,a){"use strict";a("19b4")},"281c":function(t,e,a){"use strict";a("c959")},"305e":function(t,e,a){},"325a":function(t,e,a){"use strict";a("6e5e")},"3a91":function(t,e,a){},"3aff":function(t,e,a){},"3e56":function(t,e,a){"use strict";a("11a6")},"42f3":function(t,e,a){"use strict";a.d(e,"a",(function(){return n})),a.d(e,"b",(function(){return o}));var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"follow"},[a("van-tabs",{staticClass:"header-top",attrs:{color:"#ccc"}},[a("van-tab",{attrs:{title:"首页",to:"/home"}}),a("van-tab",{attrs:{title:"用户",to:"/user"}}),a("van-tab",{attrs:{title:"关注",to:"/follow"}})],1)],1)},o=[]},"43be":function(t,e,a){t.exports=a.p+"img/touxiang.d3d9e8ee.png"},"52ce":function(t,e,a){},"56d7":function(t,e,a){"use strict";a.r(e);a("e260"),a("e6cf"),a("cca6"),a("a79d");var n=a("2b0e"),o=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"app"}},[a("van-header",{directives:[{name:"show",rawName:"v-show",value:t.$root.bNav,expression:"$root.bNav"}]}),a("router-view"),a("van-footer",{directives:[{name:"show",rawName:"v-show",value:t.$root.bFoot,expression:"$root.bFoot"}]})],1)},r=[],s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"header"},[a("van-tabs",{staticClass:"header-top",attrs:{color:"#ccc"}},[a("van-tab",{attrs:{title:"首页",to:"/home"}},[a("div",{staticClass:"van-swiper"},[a("van-swiper-text"),t._l(t.msg,(function(e,n){return a("div",{key:e._id},[a("van-card",{attrs:{price:e.price,desc:e.dataName,title:e.dataTitle,thumb:e.dataImg,"origin-price":e.original},on:{click:function(a){return t.show1(e)}}})],1)}))],2),t._t("default")],2),a("van-tab",{attrs:{title:"用户"}},[t._l(t.msg,(function(e,n){return a("div",{key:e._id},[a("van-cell-group",[a("van-cell",{attrs:{title:e.dataName,label:e.dataTitle,value:e.original},on:{click:function(a){return t.cart(e)}}})],1)],1)})),a("van-sku",{attrs:{sku:t.sku,goods:t.goods,"hide-stock":t.sku.hide_stock,"message-config":t.messageConfig},model:{value:t.show,callback:function(e){t.show=e},expression:"show"}})],2),a("van-tab",{attrs:{title:"关注"}},t._l(t.msg,(function(t,e){return a("div",{key:t._id},[a("van-cell-group",[a("van-cell",{attrs:{title:t.dataName,label:t.dataTitle,to:"/detail/"+t._id+"?collectionName=banner"}})],1)],1)})),0)],1)],1)},i=[],c=(a("0653"),a("34e9")),u=(a("c194"),a("7744")),l=function(){var t=this,e=t.$createElement,a=t._self._c||e;return t.msg?a("div",{staticClass:"van-swiper"},[a("van-swipe",{staticClass:"my-swipe",attrs:{autoplay:3e3,"indicator-color":"white"}},t._l(t.msg,(function(e,n){return a("div",{key:e._id},[a("van-swipe-item",[a("img",{attrs:{src:e.dataImg}}),a("span",[t._v(t._s(e.dataName))])])],1)})),0)],1):t._e()},d=[],p=a("90ea"),m=a("a16a"),f={name:"van-swiper-text",components:{Swiper:p["a"],SwiperSlide:m["a"]},data:function(){return{msg:[]}},mounted:function(){var t=this;this.$axios({url:"/news/banner",params:{_limit:4}}).then((function(e){t.msg=e.data.data}))}},v=f,h=(a("2312"),a("2877")),b=Object(h["a"])(v,l,d,!1,null,"249c4e55",null),g=b.exports;n["b"].use(u["a"]),n["b"].use(c["a"]);var _={name:"van-header",data:function(){return{msg:[],show:!1,sku:{},goods:{},messageConfig:{}}},components:{VanSwiperText:g},mounted:function(){var t=this;this.$axios({url:"/news/banner",params:{_limit:10}}).then((function(e){console.log(t.$route),t.msg=e.data.data}))},methods:{show1:function(t){console.log(t),this.$router.push("/detail/"+t._id+"?collectionName=banner")},cart:function(t){this.show=!0,this.sku={tree:[{k:"颜色",k_s:"s1",v:[{id:"1",name:t.dataName,imgUrl:t.dataImg,previewImgUrl:t.dataImg}],largeImageMode:!0}],list:[{id:2259,s1:"1",s2:"1",price:100*t.price,stock_num:110}],price:t.price,stock_num:227,collection_id:2261,none_sku:!1,messages:[{datetime:"0",multiple:"0",name:"备注",type:"text",required:"1",placeholder:"填写备注"}],hide_stock:!1},this.goods={picture:t.dataImg},this.customStepperConfig={quotaText:"每次限购xxx件",handleOverLimit:function(t){var e=t.action,a=t.limitType,n=t.quota,o=t.quotaUsed,r=t.startSaleNum;if("minus"===e)Toast(r>1?"".concat(r,"件起售"):"至少选择一件商品");else if("plus"===e)if(a===LIMIT_TYPE.QUOTA_LIMIT){var s="单次限购".concat(n,"件");o>0&&(s+="，你已购买".concat(o)),Toast(s)}else Toast("库存不够了")},handleStepperChange:function(t){},stockNum:1999,stockFormatter:function(t){}}}}},w=_,x=(a("325a"),Object(h["a"])(w,s,i,!1,null,"024265f0",null)),y=x.exports,k=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"van-footer"},[a("van-tabbar",{attrs:{to:"/home"},model:{value:t.active,callback:function(e){t.active=e},expression:"active"}},[a("van-tabbar-item",{attrs:{icon:"home-o",to:"/home"}},[t._v("首页")]),a("router-link",{attrs:{to:"/user"}},[a("van-tabbar-item",[a("van-icon",{attrs:{name:"user-circle-o",size:"45"}})],1)],1),a("van-tabbar-item",{attrs:{icon:"setting-o",to:"/column"}},[t._v("我的")])],1)],1)},$=[],C={name:"van-footer",data:function(){return{active:0}},components:{}},S=C,O=Object(h["a"])(S,k,$,!1,null,null,null),j=O.exports,N={name:"App",data:function(){return{}},components:{vanHeader:y,vanFooter:j},methods:{},watch:{$route:{handler:function(t){console.log("watch");var e=t.path;/home|follow|/.test(e)&&(this.$root.bNav=this.$root.bFoot=!0),/login|reg|detail/.test(e)&&(this.$root.bNav=this.$root.bFoot=!1),/user|column/.test(e)&&(this.$root.bNav=!1,this.$root.bFoot=!0)},immediate:!0}}},E=N,I=(a("6372"),Object(h["a"])(E,o,r,!1,null,"12f09286",null)),T=I.exports,q=(a("3aff"),a("6457"),a("8c4f")),P=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"home"})},F=[],L=(a("a52c"),a("2ed4")),z=(a("537a"),a("ac28")),M=(a("bda7"),a("5e46")),U=(a("da3c"),a("0b33")),W=(a("4b0a"),a("2bb1")),A=(a("7844"),a("5596")),B=(a("c3a6"),a("ad06")),J=(a("be7f"),a("565f")),R=(a("38d5"),a("772a")),D=(a("66b9"),a("b650")),H=(a("0ec5"),a("21ab")),Q=(a("3df5"),a("2830")),V=(a("4056"),a("44bf")),Y=(a("ac1e"),a("543e")),G=(a("9cb7"),a("66fd")),K=(a("e415"),a("2b5e")),X=(a("5852"),a("d961")),Z=(a("66cf"),a("343b"));n["b"].use(Z["a"]),n["b"].use(X["a"]),n["b"].use(K["a"]),n["b"].use(G["a"]),n["b"].use(Y["a"]),n["b"].use(V["a"]),n["b"].use(Q["a"]),n["b"].use(H["a"]),n["b"].use(D["a"]),n["b"].use(R["a"]),n["b"].use(J["a"]),n["b"].use(B["a"]),n["b"].use(A["a"]),n["b"].use(W["a"]),n["b"].use(U["a"]),n["b"].use(M["a"]),n["b"].use(z["a"]),n["b"].use(L["a"]);var tt={name:"home",props:{},components:{vanFooter:j,vanHeader:y},mounted:function(){},updated:function(){},methods:{},computed:{}},et=tt,at=Object(h["a"])(et,P,F,!1,null,null,null),nt=at.exports,ot=a("7a93"),rt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"content"},[a("van-nav"),a("div",{staticClass:"header"},[a("h2"),a("div",{staticClass:"user-box"},[a("img",{attrs:{src:t.$baseUrl+t.user.icon,alt:""}}),t._v(" "),a("a",{attrs:{href:"javascript:;"}},[t._v(t._s(t.user.nikename))]),a("button",{on:{click:t.logout}},[t._v("注销")])])]),t._m(0)],1)},st=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"docList"},[a("ul",[a("li",{staticClass:"gk-text"},[a("i"),a("p",[t._v("公开博文")]),a("b"),a("span",[t._v("0")])]),a("li",{staticClass:"mm-text"},[a("i"),a("p",[t._v("秘密博文")]),a("b"),a("span",[t._v("0")])]),a("li",{staticClass:"cg-text"},[a("i"),a("p",[t._v("草稿箱")]),a("b"),a("span",[t._v("0")])]),a("li",{staticClass:"sc-text"},[a("i"),a("p",[t._v("收藏夹")]),a("b"),a("span",[t._v("0")])])])])}],it=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"nav",style:{background:t.bgColor,"border-width":t.cptBorderWidth}},[a("ul",[a("li",{class:t.cptArrow,on:{click:t.goback}})])])},ct=[],ut=(a("a9e3"),{props:{bgColor:{type:String,default:"#fff"},borderWidth:{type:Number,default:1},arrow:{type:String,default:"default"}},computed:{cptBorderWidth:function(){return this.borderWidth+"px"},cptArrow:function(){return this.arrow?"default":"gray"}},methods:{goback:function(){this.$router.go(-1)}}}),lt=ut,dt=(a("7fbc"),Object(h["a"])(lt,it,ct,!1,null,"5c1c02ae",null)),pt=dt.exports,mt={name:"user",props:{},data:function(){return{user:{}}},components:{vanNav:pt},mounted:function(){var t=this;this.$axios.get("/user").then((function(e){t.user=e.data.data}))},updated:function(){},methods:{logout:function(){window.localStorage.removeItem("user"),this.$router.push("/login")}},computed:{}},ft=mt,vt=(a("c4f0"),Object(h["a"])(ft,rt,st,!1,null,"56e05fb1",null)),ht=vt.exports,bt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"detail"},[a("van-nav"),a("div",{staticClass:"content"},[a("div",{staticClass:"header clear"},[a("h2",[t._v(t._s(t.detail.zuhe))]),a("p",[t._v(t._s(t.detail.dataTitle))])]),a("div",{staticClass:"cont"},[a("h3",[t._v(t._s(t.detail.dataName))]),a("div",{staticClass:"time"},[a("p",[t._v(t._s(t.detail.original)+" "),a("span",[t._v("现价："+t._s(t.detail.price))])])]),a("div",{staticClass:"text-box"},[a("img",{attrs:{src:t.detail.dataImg,alt:""}})])])])],1)},gt=[],_t=(a("99af"),{name:"detail",data:function(){return{detail:[]}},components:{vanNav:pt},mounted:function(){var t=this,e=this.$route.params._id,a=this.$route.query.collectionName;console.log(e,a),this.$axios.get("/news/".concat(a,"/").concat(e)).then((function(e){t.detail=e.data.data}))},updated:function(){},methods:{},computed:{}}),wt=_t,xt=(a("1a54"),Object(h["a"])(wt,bt,gt,!1,null,null,null)),yt=xt.exports,kt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"user"},[a("van-search",{attrs:{"show-action":"",label:"商品",placeholder:"请输入搜索关键词"},on:{search:t.onSearch},scopedSlots:t._u([{key:"action",fn:function(){return[a("div",{on:{click:t.onSearch}},[t._v("搜索")])]},proxy:!0}]),model:{value:t.value,callback:function(e){t.value=e},expression:"value"}}),a("van-tabs",{attrs:{animated:""},model:{value:t.active,callback:function(e){t.active=e},expression:"active"}},t._l(t.msg,(function(e){return a("van-tab",{attrs:{title:e.title}},[a("van-image",{staticClass:"ccdda",attrs:{src:e.dataImg},scopedSlots:t._u([{key:"loading",fn:function(){return[a("van-loading",{attrs:{type:"spinner",size:"20"}})]},proxy:!0}],null,!0)}),t._v(" "),a("van-image",{staticClass:"ccdda",attrs:{src:e.dataImg},scopedSlots:t._u([{key:"loading",fn:function(){return[a("van-loading",{attrs:{type:"spinner",size:"20"}})]},proxy:!0}],null,!0)}),a("van-image",{staticClass:"ccdda",attrs:{src:e.dataImg},scopedSlots:t._u([{key:"loading",fn:function(){return[a("van-loading",{attrs:{type:"spinner",size:"20"}})]},proxy:!0}],null,!0)})],1)})),1)],1)},$t=[],Ct={name:"user",props:{},data:function(){return{username:"",password:"",active:1,value:"",msg:[]}},components:{vanNav:pt},mounted:function(){var t=this;this.$axios({url:"/news/list",params:{_limit:8}}).then((function(e){t.msg=e.data.data,console.log(t.msg)}))},updated:function(){},methods:{onSearch:function(t){},onCancel:function(){}},computed:{}},St=Ct,Ot=(a("84e3"),Object(h["a"])(St,kt,$t,!1,null,null,null)),jt=Ot.exports,Nt=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"login"},[n("van-grid",{attrs:{border:!1,"column-num":1,round:""}},[n("van-grid-item",[n("img",{attrs:{src:a("43be"),alt:"",width:"200px"}})])],1),n("van-form",{attrs:{"label-align":"center"}},[n("van-field",{attrs:{name:"用户名",label:"用户名",placeholder:"用户名",rules:[{required:!0,message:"请填写用户名"}]},model:{value:t.username,callback:function(e){t.username=e},expression:"username"}}),n("van-field",{attrs:{type:"password",name:"密码",label:"密码",placeholder:"密码",rules:[{required:!0,message:"请填写密码"}]},model:{value:t.password,callback:function(e){t.password=e},expression:"password"}}),n("div",{staticStyle:{margin:"16px"}},[n("van-button",{attrs:{round:"",block:"",type:"primary",size:"large"},on:{click:t.login}},[t._v("登录")])],1),n("van-button",{attrs:{round:"",block:"",to:"/reg"}},[t._v("去注册")])],1)],1)},Et=[],It={name:"login",props:{},data:function(){return{username:"",password:"",mess:""}},components:{},mounted:function(){},updated:function(){},methods:{login:function(){var t=this;console.log(1),this.$axios({url:"login",method:"post",data:{username:this.username,password:this.password}}).then((function(e){console.log(e.data.err),0===e.data.err?(window.localStorage.setItem("user",JSON.stringify(e.data)),t.$route.query.p?t.$router.push(t.$route.query.p):t.$router.push("/home")):(t.mess=e.data.msg,t.$router.push("/reg"))}))}},computed:{}},Tt=It,qt=(a("cff4"),Object(h["a"])(Tt,Nt,Et,!1,null,null,null)),Pt=qt.exports,Ft=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"reg"},[n("van-grid",{attrs:{border:!1,"column-num":1,round:""}},[n("van-grid-item",[n("img",{attrs:{src:a("43be"),alt:"",width:"200px"},on:{click:t.upload}})]),n("input",{staticStyle:{display:"none"},attrs:{type:"file",id:"icon"}})],1),n("van-form",{attrs:{"label-align":"center"}},[n("van-field",{attrs:{name:"用户名",label:"用户名",placeholder:"用户名",rules:[{required:!0,message:"请填写用户名"}]},model:{value:t.username,callback:function(e){t.username=e},expression:"username"}}),n("van-field",{attrs:{type:"password",name:"密码",label:"密码",placeholder:"密码",rules:[{required:!0,message:"请填写密码"}]},model:{value:t.password,callback:function(e){t.password=e},expression:"password"}}),n("div",{staticStyle:{margin:"16px"}},[n("van-button",{attrs:{round:"",block:"",type:"info",size:"large"},on:{click:t.reg}},[t._v("注册")])],1)],1)],1)},Lt=[],zt={name:"reg",props:{},data:function(){return{username:"",password:"",mess:""}},components:{},mounted:function(){},updated:function(){},methods:{upload:function(){var t=document.getElementById("icon");t.click()},reg:function(){var t=this,e=document.getElementById("icon"),a=new FormData;a.append("username",this.username),a.append("password",this.password),a.append("icon",e.files[0]),a.append("nikename","自动生成昵称"),this.$axios({url:"reg",method:"post",data:a}).then((function(e){0===e.data.err?t.$router.push("/login"):t.mess=e.data.msg})),console.log("reg")}}},Mt=zt,Ut=(a("3e56"),Object(h["a"])(Mt,Ft,Lt,!1,null,null,null)),Wt=Ut.exports,At=function(){var t=this,e=t.$createElement;t._self._c;return t._m(0)},Bt=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"no-page"},[a("h3",[t._v("no-page")])])}],Jt={name:"no-page",props:{},data:function(){return{}},components:{},mounted:function(){},updated:function(){},methods:{},computed:{}},Rt=Jt,Dt=(a("281c"),Object(h["a"])(Rt,At,Bt,!1,null,null,null)),Ht=Dt.exports;n["b"].use(q["a"]);var Qt=new q["a"]({mode:"history"});Qt.addRoutes([{path:"/home",component:nt,meta:"首页"},{path:"/follow",component:ot["default"],meta:"关注"},{path:"/column",component:ht,meta:"栏目"},{path:"/detail/:_id",component:yt,meta:"详情"},{path:"/user",component:jt,meta:"我的"},{path:"/login",component:Pt,meta:"登录"},{path:"/reg",component:Wt,meta:"注册"},{path:"/",redirect:"/home"},{path:"*",component:Ht,meta:"404"}]);var Vt=Qt,Yt="http://localhost:3000",Gt=(a("d3b7"),a("caad"),a("2532"),a("ac1f"),a("5319"),a("bc3a")),Kt=a.n(Gt);Kt.a.interceptors.request.use((function(t){var e=window.localStorage.getItem("user");return e=e?JSON.parse(window.localStorage.getItem("user")).token:"",t.headers={token:e},t.baseURL="/api",t}),(function(t){return Promise.reject(t)})),Kt.a.interceptors.response.use((function(t){var e=Vt.currentRoute.fullPath;return 2!==t.data.err||e.includes("/login")||(console.log(222),Vt.replace({path:"/login",query:{p:e}})),t}),(function(t){return Promise.reject(t)})),n["b"].prototype.$axios=Kt.a,window.axios=Kt.a;Kt.a;n["b"].config.productionTip=!1,n["b"].prototype.$baseUrl=Yt;new n["b"]({data:{bNav:!0,bFoot:!0,bLoding:!0},render:function(t){return t(T)},router:Vt}).$mount("#app")},6372:function(t,e,a){"use strict";a("8e0b")},6457:function(t,e){(function(t,e){var a=t.documentElement,n="orientationchange"in window?"orientationchange":"resize",o=function(){var t=a.clientWidth;t>=640&&(t=640),t&&(a.style.fontSize=t/640*100+"px")};t.addEventListener&&(e.addEventListener(n,o,!1),t.addEventListener("DOMContentLoaded",o,!1))})(document,window)},"6cac":function(t,e){},"6e5e":function(t,e,a){},"7a93":function(t,e,a){"use strict";var n=a("42f3"),o=a("edf5"),r=a("2877"),s=Object(r["a"])(o["default"],n["a"],n["b"],!1,null,null,null);e["default"]=s.exports},"7fbc":function(t,e,a){"use strict";a("305e")},"84e3":function(t,e,a){"use strict";a("3a91")},"8e0b":function(t,e,a){},ad95:function(t,e,a){},c4f0:function(t,e,a){"use strict";a("52ce")},c959:function(t,e,a){},cff4:function(t,e,a){"use strict";a("06b3")},edf5:function(t,e,a){"use strict";var n=a("6cac"),o=a.n(n);e["default"]=o.a}});
//# sourceMappingURL=app.f4335924.js.map